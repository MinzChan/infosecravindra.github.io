<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name=description content="In this post we will see that how can you use Chrome with puppeteer"><meta name=keywords content="puppeteer, node, chrome, '"><meta name=author content="Ravindra Sisodia"><meta property=og:title content="Use Google Chrome With Puppeteer: Ravindra's Blog"><meta property=og:url content=https://infosecravindra.github.io/puppeteer/node/chrome/2018/10/28/use-chrome-with-puppeteer.html><meta property=og:site_name content="Ravindra's Blog"><meta property=og:type content=article><meta property=og:description content="In this post we will see that how can you use Chrome with puppeteer"><meta property=article:author content="Ravindra Sisodia"><meta property=article:tag content=puppeteer><meta property=article:tag content=node><meta property=article:tag content=chrome><meta property=article:published_time content=2019-04-08T16:16:09Z><meta property=og:image content=https://infosecravindra.github.io/assets/images/posts/puppeteer/use-chrome-with-puppeteer.jpg><meta property=fb:app_id content=222225015360700><title>Use Google Chrome With Puppeteer | Ravindra's Blog</title><link rel=icon href=https://infosecravindra.github.io/assets/images/logo.png><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.3/css/all.css integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link href=/assets/css/screen.css rel=stylesheet><link href=/assets/css/main.css rel=stylesheet></head><body class=layout-post><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top nav-down"><div class="container pr-0"><a class=navbar-brand><img src=/assets/images/logo.png alt="Ravindra's Blog" width=30 height=30 class="d-inline-block align-top">Ravindra's Blog</a> <button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarMediumish aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/index.html><i class="fas fa-home"></i>&nbsp;&nbsp;Home</a></li><li class=nav-item><a class=nav-link href=/cheatsheets><i class="fas fa-book"></i>&nbsp;&nbsp;Cheatsheets</a></li><li class=nav-item><a class=nav-link href=/portfolio><i class="fas fa-user"></i>&nbsp;&nbsp;Projects</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><i class="far fa-address-card"></i>&nbsp;&nbsp;Contact</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a target=_blank class=nav-link href=mailto:rscipher001@gmail.com><i class="fas fa-envelope"></i>&nbsp;&nbsp;Mail</a><div class=dropdown-divider></div><a target=_blank class=nav-link href="https://www.github.com/InfoSecRavindra/"><i class="fab fa-github"></i>&nbsp;&nbsp;GitHub</a> <a target=_blank class=nav-link href="https://www.linkedin.com/in/InfoSecRavindra/"><i class="fab fa-linkedin"></i>&nbsp;&nbsp;LinkedIn</a> <a target=_blank class=nav-link href=https://www.youtube.com/c/EcoTechClubETC><i class="fab fa-youtube"></i>&nbsp;&nbsp;YouTube</a><div class=dropdown-divider></div><a target=_blank class=nav-link href=https://twitter.com/InfoSecRavindra><i class="fab fa-twitter"></i>&nbsp;&nbsp;Twitter</a></div></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading><h1 class=sitetitle>Ravindra's Blog</h1><p class=lead>Let's Secure Everything</p></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class=share><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https://infosecravindra.github.io/puppeteer/node/chrome/2018/10/28/use-chrome-with-puppeteer.html" onclick="window.open(this.href, 'facebook-share');return false;"><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Use+Google+Chrome+With+Puppeteer&url=https://infosecravindra.github.io/puppeteer/node/chrome/2018/10/28/use-chrome-with-puppeteer.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=https://infosecravindra.github.io/puppeteer/node/chrome/2018/10/28/use-chrome-with-puppeteer.html" onclick="window.open(this.href, 'linkedin-share');return false;"><i class="fab fa-linkedin-in"></i></a></li></ul><div class=sep></div><ul><li><a class="small smoothscroll" href=#disqus_thread></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><h1 class=posttitle>Use Google Chrome With Puppeteer</h1></div><img class="featured-image img-fluid" src=https://infosecravindra.github.io/assets/images/posts/puppeteer/use-chrome-with-puppeteer.jpg alt="Use Google Chrome With Puppeteer"><div class=article-post><p>Puppeteer is headless Chrome Node API, in short it is an API which allows you to control a headless chromium browser which can be used for anything from testing to scraping websites data, every puppeteer release uses a specific version of chromium which is downloaded when you install puppeteer but in today we will use our existing Google Chrome instead downloading a separate headless chromium browser which is 100+ MB in size.</p><h2 id=why-puppeteer>Why puppeteer?</h2><p>There are many tools available to parse JavaScript and web pages like using scrapy, etc but none of those tools are as powerful as using a real browser because a browser executes JavaScript which is not possible with other tools that parses JavaScript, parsing JavaScript is not as powerful as executing it, puppeteer has few extra features like ability to take website screenshots, save webpages to PDF, etc.</p><h2 id=installtion>Installtion</h2><p>Puppeteer Installation is very easy, it just takes one command <code class=highlighter-rouge>npm i puppeteer</code> in your NodeJS project but when we use this method it will download a headless version of chromium and if we have Google Chrome installed than we can simply try Chrome instead chromium by telling puppeteer about it. Using Chrome instead chromium may be buggy in some cases but who cares. By the way we are going to use NodeJS environment variables to skip chromium download. If you want to know more about NodeJS environment variable (technically npm environment) variables <a href=https://docs.npmjs.com/cli/config>click here</a></p><h2 id=steps>Steps</h2><p><strong>NOTE: Use lowercase name of every environment variable otherwise it won’t work in most cases (In fact it won’t work at all and start downloading chromium, I hate that and you would too).</strong></p><p>If not exists create a file named <code class=highlighter-rouge>.npmrc</code> in your <code class=highlighter-rouge>$HOME</code> folder or in <code class=highlighter-rouge>/etc</code>(Bad idea) and add this line</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nv>puppeteer_skip_chromium_download</span><span class=o>=</span><span class=nb>true</span>
</code></pre></div></div><p>or just type <code class=highlighter-rouge>npm config set puppeteer_skip_chromium_download true</code> in your terminal before installing npm packages (This is my favorite method). By the way you can see all npm environment variables using <code class=highlighter-rouge>npm config ls -l</code>. Lines starting with <code class=highlighter-rouge>;</code> are comments.</p><p>Now create a new NodeJS project in an empty folder using <code class=highlighter-rouge>npm init</code> and answer configuration questions. After successful project creation type <code class=highlighter-rouge>npm i puppeteer</code> and it will install puppeteer without downloading chromium.</p><p>Now we need to tell puppeteer to use chrome, let’s see how to do that in <em>Testing</em> section</p><h2 id=testing>Testing</h2><p>For tesing and demonstration purpose let’s take a screen shot of this(https://rscipher001.github.io) website. To do that create a new file <code class=highlighter-rouge>index.js</code> in your NodeJS project and add these lines.</p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>const</span> <span class=nx>puppeteer</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'puppeteer'</span><span class=p>);</span>

<span class=p>(</span><span class=k>async</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
  <span class=kd>const</span> <span class=nx>browser</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>puppeteer</span><span class=p>.</span><span class=nx>launch</span><span class=p>({</span>
  	<span class=na>executablePath</span><span class=p>:</span> <span class=s1>'/usr/bin/google-chrome'</span>
  	<span class=p>});</span>
  <span class=kd>const</span> <span class=nx>page</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>browser</span><span class=p>.</span><span class=nx>newPage</span><span class=p>();</span>
  <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=kr>goto</span><span class=p>(</span><span class=s1>'https://rscipher001.github.io'</span><span class=p>);</span>
  <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>screenshot</span><span class=p>({</span><span class=na>path</span><span class=p>:</span> <span class=s1>'rscipher001-blog.png'</span><span class=p>});</span>

  <span class=kr>await</span> <span class=nx>browser</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
<span class=p>})();</span>
</code></pre></div></div><p>On line 5 you can see <code class=highlighter-rouge>/usr/bin/google-chrome</code> replace it with your chrome location, you can use <code class=highlighter-rouge>which google-chrome</code> to find it in Linux. In Windows you can find it somewhere in <code class=highlighter-rouge>C:/Program Files/Google/</code>.</p><h2 id=references--related-links>References &amp; Related Links</h2><ul><li><a href=https://github.com/GoogleChrome/puppeteer/blob/v1.9.0/docs/api.md#environment-variables>Puppeteer Docs</a><br></li><li><a href=https://github.com/googlechrome/puppeteer>Puppeteer on GitHub</a></li></ul></div><hr><p><span>Original:&nbsp;<time datetime=2018-10-28>28 Oct 2018</time></span> <span class="float-right clearfix">Updated:&nbsp;<time datetime=2019-04-08>Apr 8, 2019</time></span></p><hr><div class=after-post-tags><ul class=tags><li><a href=/archives/posts_archive.html#chrome class=post-tag>chrome</a></li><li><a href=/archives/posts_archive.html#node class=post-tag>node</a></li><li><a href=/archives/posts_archive.html#puppeteer class=post-tag>puppeteer</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="next d-block col-md-6 text-lg-right" href=https://infosecravindra.github.io/kubernetes/cloud_computing/2018/11/05/kubernetes-in-ubuntu-with-minikube.html>Kubernetes in Ubuntu with Minikube &raquo;</a><div class=clearfix></div></div></div></div></div><div class=container><div id=comments class="row justify-content-center mb-5"><div class="col-md-9 col-offset-1"><div id=disqus_thread></div><script src=/assets/js/disqus.js></script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2019 Ravindra Sisodia</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script defer src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script defer src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script defer src=/assets/js/ie10-viewport-bug-workaround.js></script><script defer src=/assets/js/mediumish.js></script><script defer id=dsq-count-scr src=//infosecravindra-github-io.disqus.com/count.js></script></body></html>
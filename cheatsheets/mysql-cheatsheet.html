<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><meta content=#fff name=theme-color><meta content="MySQL Cheatsheet" name=description><meta content=" mysql,  '" name=keywords><meta content="Ravindra Sisodia" name=author><meta content="MySQL Cheatsheet: Ravindra's Blog" property=og:title><meta content=https://infosecravindra.github.io/cheatsheets/mysql-cheatsheet.html property=og:url><meta content="Ravindra's Blog" property=og:site_name><meta content=article property=og:type><meta content="MySQL Cheatsheet" property=og:description><meta content="Ravindra Sisodia" property=article:author><meta content=mysql property=article:tag><meta content=2019-08-01T10:56:56Z property=article:published_time><meta content=https://infosecravindra.github.io/assets/images/cheatsheets/mysql-cheatsheet.webp property=og:image itemprop=image><meta content=222225015360700 property=fb:app_id><title>MySQL Cheatsheet | Ravindra's Blog</title><link href=/assets/images/favicon/logo.webp rel=icon><link href=/manifest.json rel=manifest><link href=/assets/images/logo-192x192.png rel=apple-touch-icon><link href=/assets/css/all.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.4.1.min.js defer crossorigin=anonymous integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js defer crossorigin=anonymous integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM></script><script src=/assets/js/mediumish.js defer></script><script src=/assets/js/service-worker-handler.js defer></script><script src=//infosecravindra-github-io.disqus.com/count.js defer id=dsq-count-scr></script><script type=application/ld+json>{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    
      "image": "https://infosecravindra.github.io/assets/images/cheatsheets/mysql-cheatsheet.webp",
    
    "url": "https://infosecravindra.github.io/cheatsheets/mysql-cheatsheet.html",
    "headline": "MySQL Cheatsheet",
    "description": "MySQL Cheatsheet",
    "datePublished": "2019-01-01 00:00:00 +0530",
    "dateCreated": "2019-01-01 00:00:00 +0530",
    "dateModified": "2019-08-01 10:56:56 +0530",
    "inLanguage": "en-US",
    "isFamilyFriendly": "true",
    "contentLocation": {
      "@type": "Place",
      "name": "Bhopal, IN"
    },
    "keywords": [
    
      "mysql"
    
    ],
    "articleSection": "mysql,",
    "accountablePerson": {
  "@type": "Person",
  "name": "Ravindra Sisodia",
  "nationality": "Indian",
  "gender": "male",
  "Description": "Software Engineer",
  "sameAs": [
    "https://twitter.com/InfoSecRavindra",
    "https://instagram.com/InfoSecRavindra",
    "https://www.github.com/InfoSecRavindra",
    "https://www.linkedin.com/in/InfoSecRavindra"
  ]
},
    "author": {
  "@type": "Person",
  "name": "Ravindra Sisodia",
  "nationality": "Indian",
  "gender": "male",
  "Description": "Software Engineer",
  "sameAs": [
    "https://twitter.com/InfoSecRavindra",
    "https://instagram.com/InfoSecRavindra",
    "https://www.github.com/InfoSecRavindra",
    "https://www.linkedin.com/in/InfoSecRavindra"
  ]
},
    "creator": {
  "@type": "Person",
  "name": "Ravindra Sisodia",
  "nationality": "Indian",
  "gender": "male",
  "Description": "Software Engineer",
  "sameAs": [
    "https://twitter.com/InfoSecRavindra",
    "https://instagram.com/InfoSecRavindra",
    "https://www.github.com/InfoSecRavindra",
    "https://www.linkedin.com/in/InfoSecRavindra"
  ]
},
    "publisher": {
      "@type": "Organization",
      "name": "Ravindra Sisodia",
      "url": "https://infosecravindra.github.io",
      "logo": {
        "@type": "ImageObject",
        "url": "https://infosecravindra.github.io/assets/images/favicon/logo.webp",
        "width":"128",
        "height":"128"
      }
    },
    "mainEntityOfPage": "https://infosecravindra.github.io/cheatsheets/mysql-cheatsheet.html"
  }</script></head><body class=layout-post><nav class="bg-white fixed-top mediumnavigation nav-down navbar navbar-expand-lg navbar-light shadow-sm"><div class="container pr-0"><a href=/ class=navbar-brand><img alt="Ravindra's Blog" class="align-top d-inline-block" src=/assets/images/favicon/logo.webp height=30 width=30>Ravindra's Blog </a><button aria-controls=navbarMediumish aria-expanded=false aria-label="Toggle navigation" class="btn-link navbar-toggler" data-target=#navbarMediumish data-toggle=collapse><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="ml-auto navbar-nav"><li class=nav-item><a href=/index.html class=nav-link><span class=icon-home3></span> &nbsp;&nbsp;Home</a></li><li class=nav-item><a href=/cheatsheets class=nav-link><span class=icon-book></span> &nbsp;&nbsp;Cheatsheets</a></li><li class=nav-item><a href=/experiments class=nav-link><span class=icon-book></span> &nbsp;&nbsp;Experiments</a></li><li class=nav-item><a href=/portfolio class=nav-link><span class=icon-user></span> &nbsp;&nbsp;Projects</a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" aria-expanded=false aria-haspopup=true data-toggle=dropdown id=navbarDropdown role=button><span class=icon-address-book></span> &nbsp;&nbsp;Contact</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=mailto:rscipher001@gmail.com class=nav-link rel=noopener target=_blank><span class=icon-envelop></span> &nbsp;&nbsp;Mail</a><div class=dropdown-divider></div><a href=https://www.github.com/InfoSecRavindra/ class=nav-link rel=noopener target=_blank><span class=icon-github></span>&nbsp;&nbsp;GitHub</a> <a href=https://www.linkedin.com/in/InfoSecRavindra/ class=nav-link rel=noopener target=_blank><span class=icon-linkedin></span>&nbsp;&nbsp;LinkedIn</a> <a href=https://www.youtube.com/c/EcoTechClubETC class=nav-link rel=noopener target=_blank><span class=icon-youtube></span>&nbsp;&nbsp;YouTube</a><div class=dropdown-divider></div><a href=https://twitter.com/InfoSecRavindra class=nav-link rel=noopener target=_blank><span class=icon-twitter></span>&nbsp;&nbsp;Twitter</a></div></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading><h1 class=sitetitle>Ravindra's Blog</h1><p class=lead>Let's Secure Everything</p></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class=share><p>Share</p><ul><li class="ml-1 mr-1"><a href="https://facebook.com/sharer.php?u=https://infosecravindra.github.io/cheatsheets/mysql-cheatsheet.html" rel=noopener target=_blank onclick="window.open(this.href, 'facebook-share');return false;"><span class=sr-only>Facebook</span><span class=icon-facebook2></span></a></li><li class="ml-1 mr-1"><a href="https://twitter.com/intent/tweet?text=MySQL+Cheatsheet&url=https://infosecravindra.github.io/cheatsheets/mysql-cheatsheet.html" rel=noopener target=_blank onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><span class=sr-only>Twitter</span> <span class=icon-twitter></span></a></li><li class="ml-1 mr-1"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://infosecravindra.github.io/cheatsheets/mysql-cheatsheet.html" rel=noopener target=_blank onclick="window.open(this.href, 'linkedin-share');return false;"><span class=sr-only>LinkedIn</span> <span class=icon-linkedin></span></a></li></ul><div class=sep></div><ul><li><a href=#disqus_thread class="small smoothscroll"></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><h1 class=posttitle>MySQL Cheatsheet</h1></div><img alt="MySQL Cheatsheet" class="featured-image img-fluid" src=https://infosecravindra.github.io/assets/images/cheatsheets/mysql-cheatsheet.webp importance=low><div class=article-post><h1 id=ddl>DDL</h1><p>DDL or Data Definition Language means it is used to define table and database structure, these commands are not used for BREAD/CRUD operations.</p><h3 id=create-database>Create Database</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>CREATE</span> <span class=k>DATABASE</span> <span class=o>&lt;</span><span class=n>database_name</span><span class=o>&gt;</span>
</code></pre></div></div><h3 id=create-table>Create Table</h3><h4 id=simple-table-with-primary--unique-columns>Simple Table With Primary &amp; Unique Columns</h4><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>users</span><span class=p>(</span>
    <span class=n>id</span> <span class=n>INT</span> <span class=n>AUTO_INCREMENT</span><span class=p>,</span>
    <span class=n>name</span> <span class=n>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
    <span class=n>email</span> <span class=n>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>),</span>
    <span class=n>mobile</span> <span class=n>DECIMAL</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=mi>0</span><span class=p>),</span>

    <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>(</span><span class=n>id</span><span class=p>),</span>
    <span class=k>CONSTRAINT</span> <span class=k>UNIQUE</span> <span class=n>unique_email</span><span class=p>(</span><span class=n>email</span><span class=p>),</span>
    <span class=k>CONSTRAINT</span> <span class=k>UNIQUE</span> <span class=n>unique_mobile</span><span class=p>(</span><span class=n>mobile</span><span class=p>)</span>
<span class=p>)</span>
</code></pre></div></div><h4 id=simple-table-with-primary--foreign-columns>Simple Table With Primary &amp; Foreign Columns</h4><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>addresses</span><span class=p>(</span>
    <span class=n>id</span> <span class=n>INT</span> <span class=n>AUTO_INCREMENT</span><span class=p>,</span>
    <span class=n>user_id</span> <span class=n>INT</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
    <span class=n>address</span> <span class=n>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span> <span class=k>NOT</span> <span class=k>NULL</span><span class=p>,</span>
    <span class=n>city</span> <span class=n>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>),</span>
    <span class=k>state</span> <span class=n>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>),</span>
    <span class=n>country</span> <span class=n>VARCHAR</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span> <span class=k>DEFAULT</span> <span class=s1>'India'</span><span class=p>,</span>

    <span class=k>PRIMARY</span> <span class=k>KEY</span><span class=p>(</span><span class=n>id</span><span class=p>),</span>
    <span class=k>FOREIGN</span> <span class=k>KEY</span><span class=p>(</span><span class=n>user_id</span><span class=p>)</span> <span class=k>REFERENCES</span> <span class=n>users</span><span class=p>(</span><span class=n>id</span><span class=p>)</span>
        <span class=k>ON</span> <span class=k>DELETE</span> <span class=k>CASCADE</span>
<span class=p>)</span>
</code></pre></div></div><h4 id=table-cloning>Table Cloning</h4><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>users_copy</span> <span class=k>LIKE</span> <span class=n>users</span>
</code></pre></div></div><h4 id=alter-table--add-unique>Alter Table &amp; Add Unique</h4><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=c1>-- Unique username column in users table</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>users</span>
<span class=k>ADD</span> <span class=k>UNIQUE</span> <span class=n>users_username_unique</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
</code></pre></div></div><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=c1>-- Unique Two Columns</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>menu</span>
<span class=k>ADD</span> <span class=k>CONSTRAINT</span> <span class=n>unique_user_parent_id</span> <span class=k>UNIQUE</span> <span class=p>(</span><span class=n>id</span><span class=p>,</span> <span class=n>parentId</span><span class=p>)</span>
</code></pre></div></div><h3 id=alter-table--add-updated-at>Alter Table &amp; Add Updated At</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>users</span>
<span class=k>ADD</span> <span class=k>COLUMN</span> <span class=n>updated_at</span> <span class=k>TIMESTAMP</span>
    <span class=k>DEFAULT</span> <span class=k>CURRENT_TIMESTAMP</span>
    <span class=k>ON</span> <span class=k>UPDATE</span> <span class=k>CURRENT_TIMESTAMP</span>
</code></pre></div></div><h3 id=reset-tables-with-foreign-keys>Reset Tables With Foreign Keys</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=c1>-- Disable Foreign Checks</span>
<span class=k>SET</span> <span class=n>FOREIGN_KEY_CHECKS</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

<span class=c1>-- Truncate users Table</span>
<span class=k>TRUNCATE</span> <span class=k>table</span> <span class=n>users</span><span class=p>;</span>

<span class=c1>-- Enable Foreign Checks</span>
<span class=k>SET</span> <span class=n>FOREIGN_KEY_CHECKS</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</code></pre></div></div><h3 id=alter-table--add-foreign-key>Alter Table &amp; Add Foreign Key</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=c1>-- Add foreign key to address table referencing id on users table.</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>addresses</span>
<span class=k>ADD</span> <span class=k>FOREIGN</span> <span class=k>KEY</span> <span class=p>(</span><span class=n>user_id</span><span class=p>)</span> <span class=k>REFERENCES</span> <span class=n>users</span><span class=p>(</span><span class=n>id</span><span class=p>);</span> 
</code></pre></div></div><h1 id=dml>DML</h1><p>These commands can’t change table structure but they are used for interacting with data.</p><h3 id=show-all-database>Show All Database</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>SHOW</span> <span class=n>DATABASES</span>
</code></pre></div></div><h3 id=select-database>Select Database</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=n>USE</span> <span class=o>&lt;</span><span class=n>database_name</span><span class=o>&gt;</span>
</code></pre></div></div><h3 id=show-all-tables>Show All Tables</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>SHOW</span> <span class=n>TABLES</span>
</code></pre></div></div><h3 id=show-all-indexes-for-a-table>Show All Indexes For A Table</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>SHOW</span> <span class=k>INDEX</span> <span class=k>FROM</span> <span class=o>&lt;</span><span class=k>table_name</span><span class=o>&gt;</span>
</code></pre></div></div><h3 id=insert-data>Insert Data</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=c1>-- Alternate syntac</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>users</span>
    <span class=k>SET</span>
        <span class=n>name</span> <span class=o>=</span> <span class=nv>"Ravindra"</span><span class=p>,</span>
        <span class=n>email</span> <span class=o>=</span> <span class=nv>"ravindra@example.com"</span><span class=p>,</span>
        <span class=n>mobile</span> <span class=o>=</span> <span class=nv>"9876543210"</span>
<span class=c1>-- Mainstream syntax</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>users</span>
    <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>email</span><span class=p>,</span> <span class=n>mobile</span><span class=p>)</span>
    <span class=k>VALUES</span>
    <span class=p>(</span><span class=nv>"Ravindra"</span><span class=p>,</span> <span class=nv>"ravindra@example.com"</span><span class=p>,</span> <span class=nv>"9876543210"</span><span class=p>)</span>
</code></pre></div></div><h3 id=insert--update-in-one-query>Insert &amp; Update in One Query</h3><p>This is useful for situation where a column (or two/more columns) are unique in table, When using insert it will create new entry but if it finds duplicate than we can run update within same query</p><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>INSERT</span> <span class=k>INTO</span>
  <span class=n>users</span>
<span class=k>SET</span>
  <span class=n>mobile</span> <span class=o>=</span> <span class=s1>'9876543210'</span><span class=p>,</span> <span class=c1>-- It is unique in table</span>
  <span class=n>email</span> <span class=o>=</span> <span class=s1>'john@example.com'</span><span class=p>,</span>
<span class=c1>-- If it already finds a record with same data (mobile = 9876543210)</span>
<span class=k>ON</span> <span class=n>DUPLICATE</span> <span class=k>KEY</span> <span class=k>UPDATE</span>
  <span class=n>email</span> <span class=o>=</span> <span class=s1>'john@example.com'</span> <span class=c1>-- Just run update query</span>
</code></pre></div></div><h1 id=misc>Misc</h1><p>Contains list about stuff that is not part of DDL or DML</p><h3 id=import-data-from-sql-file>Import Data From SQL File</h3><p>How to import a database, it contains both methods I know.</p><h4 id=from-shell>From Shell</h4><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=c1>-- Open SQL Shell and type</span>
<span class=k>source</span> <span class=n>path_to_sql_file</span><span class=p>.</span><span class=k>sql</span>
</code></pre></div></div><h4 id=from-prompt>From Prompt</h4><div class="highlighter-rouge language-bash"><div class=highlight><pre class=highlight><code><span class=c># System Terminal/ Command Prompt</span>
mysql <span class=nt>-uusername</span> <span class=nt>-p</span> database &lt; sql_file.sql
</code></pre></div></div><h3 id=enable-group-by-in-mysql-57>Enable Group By in MySQL 5.7+</h3><p>Group by doesn’t work in MySQL 5.7+ if column which is being used for grouping is not selected, fix that.</p><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>SET</span> <span class=k>GLOBAL</span> <span class=n>sql_mode</span><span class=o>=</span><span class=nv>"STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"</span><span class=p>;</span>
</code></pre></div></div><h3 id=add-new-mysql-user-with-all-privileges>Add New MySQL User with All Privileges</h3><div class="highlighter-rouge language-sql"><div class=highlight><pre class=highlight><code><span class=k>CREATE</span> <span class=k>USER</span> <span class=s1>'ravindra'</span><span class=o>@</span><span class=s1>'localhost'</span> <span class=n>IDENTIFIED</span> <span class=k>BY</span> <span class=s1>'password'</span><span class=p>;</span>
<span class=k>GRANT</span> <span class=k>ALL</span> <span class=k>PRIVILEGES</span> <span class=k>ON</span> <span class=o>*</span> <span class=p>.</span> <span class=o>*</span> <span class=k>TO</span> <span class=s1>'ravindra'</span><span class=o>@</span><span class=s1>'localhost'</span><span class=p>;</span>
<span class=n>FLUSH</span> <span class=k>PRIVILEGES</span><span class=p>;</span>
</code></pre></div></div></div><hr><p><span>Original:&nbsp;<time datetime=2019-01-01>01 Jan 2019</time></span> <span class="clearfix float-right">Updated:&nbsp;<time datetime=2019-08-01>Aug 1, 2019</time></span></p><hr><div class=after-post-tags><ul class=tags><li><a href=/archives/cheatsheets_archive.html#mysql class=post-tag>mysql</a></li></ul></div><div class="row PageNavigation d-flex font-weight-bold justify-content-between"><a href=https://infosecravindra.github.io/cheatsheets/linux-commands-cheatsheet.html class="col-md-6 d-block prev">&laquo; Linux Commands Cheatsheet</a> <a href=https://infosecravindra.github.io/cheatsheets/nmap-cheatsheet.html class="col-md-6 d-block next text-lg-right">NMap Cheatsheet &raquo;</a><div class=clearfix></div></div></div></div></div><div class=container><div class="row justify-content-center mb-5" id=comments><div class="col-md-9 col-offset-1"><div id=disqus_thread></div><script src=/assets/js/disqus.js></script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer class=footer><div class=container><div class="row text-dark"><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2019 Ravindra Sisodia</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a href=https://www.wowthemes.net class=text-dark rel=noopener target=_blank>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div></body></html>
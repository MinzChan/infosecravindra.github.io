<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel=icon href=https://infosecravindra.github.io/assets/images/favicons/logo.png><link rel=apple-touch-icon sizes=57x57 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://infosecravindra.github.io/assets/images/favicons/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=https://infosecravindra.github.io/assets/images/favicons/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=https://infosecravindra.github.io/assets/images/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=https://infosecravindra.github.io/assets/images/favicons/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=https://infosecravindra.github.io/assets/images/favicons/favicon-16x16.png><link rel=manifest href=https://infosecravindra.github.io/assets/images/favicons/manifest.json><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-TileImage content=https://infosecravindra.github.io/assets/images/favicons/ms-icon-144x144.png><meta name=theme-color content=#ffffff><meta name=Description content="How can we install and start using Kubernetes in Ubuntu and derivatives using MiniKube, this can also be used as reference for other Linux variants like RedHat, Fedora, SUSE, etc."><meta name=keywords content="kubernetes, cloud_computing, 'Ravindra Sisodia'"><meta name=theme-color content=#212121><meta property=og:title content="Kubernetes in Ubuntu with Minikube: Ravindra's Blog - Let's Secure Everything"><meta property=og:url content=https://infosecravindra.github.io/kubernetes/cloud_computing/2018/11/05/kubernetes-in-ubuntu-with-minikube.html><meta property=og:site_name content="Ravindra's Blog - Let's Secure Everything"><meta property=og:type content=article><meta property=og:description content="How can we install and start using Kubernetes in Ubuntu and derivatives using MiniKube, this can also be used as reference for other Linux variants like RedHat, Fedora, SUSE, etc."><meta property=article:author content="Ravindra Sisodia"><meta property=article:tag content=kubernetes><meta property=article:tag content=cloud_computing><meta property=article:published_time content=2019-04-08T16:16:09Z><meta property=og:image content=https://infosecravindra.github.io/assets/images/posts/kubernetes/getting-started-with-kubernetes-in-ubuntu-with-minikube.jpg><meta property=fb:app_id content=222225015360700><meta name=author content="Ravindra Sisodia"><title>Kubernetes in Ubuntu with Minikube | Ravindra's Blog</title><meta name=description content="How can we install and start using Kubernetes in Ubuntu and derivatives using MiniKube, this can also be used as reference for other Linux variants like RedHat, Fedora, SUSE, etc."><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.3/css/all.css integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link href=/assets/css/screen.css rel=stylesheet><link href=/assets/css/main.css rel=stylesheet></head><body class=layout-post><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href="/"><img src=/assets/images/logo.png alt="Ravindra's Blog"> <a class=navbar-brand href="/">Ravindra's Blog</a></a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/index.html><i class="fas fa-home"></i>&nbsp;&nbsp;Home</a></li><li class=nav-item><a class=nav-link href=/cheatsheets><i class="fas fa-book"></i>&nbsp;&nbsp;Cheatsheets</a></li><li class=nav-item><a class=nav-link href=/portfolio><i class="fas fa-user"></i>&nbsp;&nbsp;Projects</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><i class="far fa-address-card"></i>&nbsp;&nbsp;Contact</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a target=_blank class=nav-link href=mailto:rscipher001@gmail.com><i class="fas fa-envelope"></i>&nbsp;&nbsp;Mail</a><div class=dropdown-divider></div><a target=_blank class=nav-link href="https://www.github.com/InfoSecRavindra/"><i class="fab fa-github"></i>&nbsp;&nbsp;GitHub</a> <a target=_blank class=nav-link href="https://www.linkedin.com/in/InfoSecRavindra/"><i class="fab fa-linkedin"></i>&nbsp;&nbsp;LinkedIn</a> <a target=_blank class=nav-link href=https://www.youtube.com/c/EcoTechClubETC><i class="fab fa-youtube"></i>&nbsp;&nbsp;YouTube</a><div class=dropdown-divider></div><a target=_blank class=nav-link href=https://twitter.com/InfoSecRavindra><i class="fab fa-twitter"></i>&nbsp;&nbsp;Twitter</a></div></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading><h1 class=sitetitle>Ravindra's Blog</h1><p class=lead>Let's Secure Everything</p></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class=share><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https://infosecravindra.github.io/kubernetes/cloud_computing/2018/11/05/kubernetes-in-ubuntu-with-minikube.html" onclick="window.open(this.href, 'facebook-share');return false;"><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Kubernetes in Ubuntu with Minikube&url=https://infosecravindra.github.io/kubernetes/cloud_computing/2018/11/05/kubernetes-in-ubuntu-with-minikube.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=https://infosecravindra.github.io/kubernetes/cloud_computing/2018/11/05/kubernetes-in-ubuntu-with-minikube.html" onclick="window.open(this.href, 'linkedin-share');return false;"><i class="fab fa-linkedin-in"></i></a></li></ul><div class=sep></div><ul><li><a class="small smoothscroll" href=#disqus_thread></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><h1 class=posttitle>Kubernetes in Ubuntu with Minikube</h1></div><img class="featured-image img-fluid" src=https://infosecravindra.github.io/assets/images/posts/kubernetes/getting-started-with-kubernetes-in-ubuntu-with-minikube.jpg alt="Kubernetes in Ubuntu with Minikube"><div class=article-post><p>I am skipping introduction part for <strong>Kubernetes</strong> and <strong>Docker</strong>, you can read that everywhere on the Internet. Let’s talk about <strong>Minikube</strong>.</p><blockquote><p><strong>Minikube</strong> runs a single-node <strong>Kubernetes</strong> cluster inside a VM on your laptop for users looking to try out <strong>Kubernetes</strong> or develop with it day-to-day.</p></blockquote><p>It says <strong>Minikube</strong> allow us to run <strong>Kubernetes</strong> cluster on our Desktop or Laptop using virtual machine for learning. <strong>Minikube</strong> can run on any virtual machine technology like virtual-box, kvm, vmware, etc. It can also use our host OS instead VM. In this tutorial I will use VirtualBox. Understanding <strong>Kubernetes</strong> is tough in the beginning because of terminology (jargons) but don’t worry it is very easy when you take one step at a time, trust me you are going to love it and by the way you need minimum 8 GB RAM for smooth experience. We are going to take following steps</p><ul><li>Install <strong>Minikube</strong> and <code class=highlighter-rouge>kubectl</code>.</li><li>Install VirtualBox and VirtualBox Extensions.</li><li>Write an hello-world application in NodeJS.</li><li>Create a Docker image for our applications.</li><li>Create a <strong>Kubernetes</strong> deployment.</li><li>Create a <strong>Kubernetes</strong> service.</li><li>And you’ll be ready to explore <strong>Kubernetes</strong>.</li></ul><h2 id=first-step-installation>First Step: Installation</h2><p>We need to install <code class=highlighter-rouge>kubectl</code> and <strong>Minikube</strong>. <code class=highlighter-rouge>kubectl</code> is a command line program which is used to do almost everything in <strong>Kubernetes</strong> cluster, you can install it using <code class=highlighter-rouge>snap</code> but it caused some problems for me because I didn’t install with classic flag and I didn’t try <code class=highlighter-rouge>snap</code> again. You can <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">click here</a> for official installation instruction. Anyways here are quick copy paste from their GitHub README, it is the fastest and best way to install both <code class=highlighter-rouge>kubectl</code> and <strong>Minikube</strong></p><h4 id=minikube><strong>Minikube</strong></h4><div class=highlighter-rouge><div class=highlight><pre class=highlight><code>curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 &amp;&amp; chmod +x minikube &amp;&amp; sudo cp minikube /usr/local/bin/ &amp;&amp; rm minikube
</code></pre></div></div><h4 id=kubectl>kubectl</h4><div class=highlighter-rouge><div class=highlight><pre class=highlight><code>curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl &amp;&amp; chmod +x kubectl &amp;&amp; sudo cp kubectl /usr/local/bin/ &amp;&amp; rm kubectl
</code></pre></div></div><p>You can verify successful installation using <code class=highlighter-rouge>kubectl version</code> and <code class=highlighter-rouge>minikube version</code></p><div class=highlighter-rouge><div class=highlight><pre class=highlight><code>=&gt; minikube version
minikube version: v0.30.0

=&gt; kubectl version
Client Version: version.Info{Major:"1", Minor:"12", GitVersion:"v1.12.2", GitCommit:"17c77c7898218073f14c8d573582e8d2313dc740", GitTreeState:"clean", BuildDate:"2018-10-24T06:54:59Z", GoVersion:"go1.10.4", Compiler:"gc", Platform:"linux/amd64"}
Server Version: version.Info{Major:"1", Minor:"10", GitVersion:"v1.10.0", GitCommit:"fc32d2f3698e36b93322a3465f63a14e9f0eaead", GitTreeState:"clean", BuildDate:"2018-03-26T16:44:10Z", GoVersion:"go1.9.3", Compiler:"gc", Platform:"linux/amd64"}
</code></pre></div></div><h2 id=preparation-install-virtualbox>Preparation: Install VirtualBox</h2><p><strong>Minikube</strong> uses VirtualBox so install VirtualBox using <code class=highlighter-rouge>sudo apt install VirtualBox-qt VirtualBox-ext-pack</code> and accept ToC prompt during installation.</p><h2 id=running-minikube>Running <strong>Minikube</strong></h2><p>Open terminal and type <code class=highlighter-rouge>minikube start</code> and it will start minikube. <strong>Minikube</strong> downloads few files on first run so it is going to take some. It may take up-to 10 minutes or more on slow systems.</p><div class=highlighter-rouge><div class=highlight><pre class=highlight><code>$ minikube start
Starting local Kubernetes v1.10.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
kubectl is now configured to use the cluster.
Loading cached images from config file.
</code></pre></div></div><p>Minikube is <strong>Kubernetes</strong> cluster which is up and running.</p><h3 id=useful-information-about-minikube>Useful Information About Minikube</h3><ul><li><strong>Minikube</strong> creates a virtual machines using headless VirtualBox.</li><li>It downloads temporary files in <code class=highlighter-rouge>$HOME/.minikube/cache/</code> folder.</li><li><strong>Minikube</strong> virtual machine related files can be found in <code class=highlighter-rouge>$HOME/.minikube/machines/minikube/</code></li><li>You can also verify <strong>Minikube</strong> VM installation by opening VirtualBox, it will show minikube in the VM List.</li></ul><h2 id=lets-play-jargon-games>Let’s play jargon games</h2><p>Every time I read a <strong>Kubernetes</strong> tutorial I found everything confusing because of words like pods, deployment, service, NodePort, etc. This is when most people gets confused and runs away. Let’s avoid that by familiarizing ourself with <strong>Kubernetes</strong> terminology. I assume you’re already familiar with Docker terminology and have basic knowledge of docker and Dockerfile. You can access official glossary <a href="https://kubernetes.io/docs/reference/glossary/">here</a>. We need to understand about Pods, Deployments and services to get started, When you’ll a have a clear idea about these three you can learn everything on your own.</p><h4 id=pod>Pod</h4><p>Pods are very fundamental element in <strong>Kubernetes</strong>. Official documentation has the following definition.</p><blockquote><p>The smallest and simplest <strong>Kubernetes</strong> object. A Pod represents a set of running containers on your cluster.</p></blockquote><blockquote><p>A Pod is typically set up to run a single primary container. It can also run optional sidecar containers that add supplementary features like logging. Pods are commonly managed by a Deployment.</p></blockquote><p>First of all ignore that deployment word if you don’t know what it means, we will learn about everything.</p><p>A pod is either a single container or a collection of tightly coupled containers that can’t work without each other.</p><h4 id=cluster>Cluster</h4><blockquote><p>A set of machines, called nodes, that run containerized applications managed by <strong>Kubernetes</strong>.</p></blockquote><blockquote><p>A cluster has several worker nodes and at least one master node.</p></blockquote><p>It should be clear by reading above definition, cluster is a set of machines that runs containerized applications that is controlled/managed by <strong>Kubernetes</strong>. For simplification think about <strong>Minikube</strong> because <strong>Minikube</strong> is a cluster or in this case <strong>Minikube</strong> is a <strong>Kubernetes</strong> cluster.</p><h4 id=deployment>Deployment</h4><blockquote><p>An API object that manages a replicated application.</p></blockquote><p>Deployment is a <strong>Kubernetes</strong> object, Deployment is created from container images, you can deploy a docker image as a deployment.</p><p>For example your app is packed in a docker image named <code class=highlighter-rouge>your-app:v1</code>, to run your app in <strong>Kubernetes</strong> you can create a deployment using this image and name it <code class=highlighter-rouge>your-app</code> or whatever you like, this will create a <strong>Kubernetes</strong> deployment and now you can play with your application using <strong>Kubernetes</strong>. To run your application <strong>Kubernetes</strong> will create one or more pods those pods will contain one or more containers that runs your application. When you create a deployment.</p><h4 id=service>Service</h4><blockquote><p>An API object that describes how to access applications, such as a set of Pods , and can describe ports and load-balancers.</p></blockquote><p>We use deployment to run our application in <strong>Kubernetes</strong> but we can’t access it outside the pods. To expose a service outside it’s pod we use a Service. Creating a service will expose a deployment to the world and everyone can access the service. Service is also a <strong>Kubernetes</strong> object, you can interact with all <strong>Kubernetes</strong> objects using <strong>Kubernetes</strong> REST API which allow us to automate tasks easily.</p><p>If you’re still confused then take some time,</p><h4 id=lets-create-docker-image>Let’s create Docker Image</h4><p>We need to deply something to <strong>Minikube</strong> so I am following Hello <strong>Minikube</strong> tutorial from their official tutorials. In this step we will create an image from Dockerfile and then deploy that image on <strong>Kubernetes</strong>.</p><p><strong>File: Dockerfile</strong></p><pre><code class=language-Dockerfile>FROM node:6.14.2
EXPOSE 8080
COPY server.js .
CMD node server.js
</code></pre><p><strong>File: server.js</strong></p><div class="language-js highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>var</span> <span class=nx>http</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>'http'</span><span class=p>);</span>

<span class=kd>var</span> <span class=nx>handleRequest</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>request</span><span class=p>,</span> <span class=nx>response</span><span class=p>)</span> <span class=p>{</span>
  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>'Received request for URL: '</span> <span class=o>+</span> <span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
  <span class=nx>response</span><span class=p>.</span><span class=nx>writeHead</span><span class=p>(</span><span class=mi>200</span><span class=p>);</span>
  <span class=nx>response</span><span class=p>.</span><span class=nx>end</span><span class=p>(</span><span class=s1>'Hello World!'</span><span class=p>);</span>
<span class=p>};</span>
<span class=kd>var</span> <span class=nx>www</span> <span class=o>=</span> <span class=nx>http</span><span class=p>.</span><span class=nx>createServer</span><span class=p>(</span><span class=nx>handleRequest</span><span class=p>);</span>
<span class=nx>www</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>8080</span><span class=p>);</span>
</code></pre></div></div><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>docker build <span class=nt>-t</span> hello_node:v1 <span class=nb>.</span>
</code></pre></div></div><p>appending <code class=highlighter-rouge>:v#</code> is common practice for memorizing versions where <code class=highlighter-rouge>#</code> is version number.</p><p>Now you can check your images by command <code class=highlighter-rouge>docker images</code> or <code class=highlighter-rouge>docker image ls</code></p><p>Now it is time to play with <code class=highlighter-rouge>Kubernetes</code>.</p><p>To be continued…</p><h2 id=other-resources>Other Resources</h2><ul><li><a href=https://github.com/kubernetes/minikube><strong>Minikube</strong>: GitHub</a><br></li><li><a href=https://github.com/kubernetes/kubernetes><strong>Kubernetes</strong>: GitHub</a><br></li><li><a href=https://kubernetes.io/docs/tutorials/hello-minikube><strong>Hello Minikube</strong></a><br></li></ul></div><hr><p><span>Original:&nbsp;<time datetime=2018-11-05>05 Nov 2018</time></span> <span class="float-right clearfix">Updated:&nbsp;<time datetime=2019-04-08 itemprop=dateModified>Apr 8, 2019</time></span></p><hr><div class=after-post-tags><ul class=tags><li><a href=/archives/posts_archive.html#cloud-computing class=post-tag>cloud_computing</a></li><li><a href=/archives/posts_archive.html#kubernetes class=post-tag>kubernetes</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="prev d-block col-md-6" href=https://infosecravindra.github.io/puppeteer/node/chrome/2018/10/28/use-chrome-with-puppeteer.html>&laquo; Use Google Chrome With Puppeteer</a> <a class="next d-block col-md-6 text-lg-right" href=https://infosecravindra.github.io/android/java/2018/12/03/android-splash-screen-tutorial.html>Android Splash Screen Tutorial &raquo;</a><div class=clearfix></div></div></div></div></div><div class=container><div id=comments class="row justify-content-center mb-5"><div class=col-md-8><div id=disqus_thread></div><script src=/assets/js/disqus.js></script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2019 Ravindra Sisodia</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script src=/assets/js/ie10-viewport-bug-workaround.js></script><script src=/assets/js/mediumish.js></script><script id=dsq-count-scr src=//infosecravindra-github-io.disqus.com/count.js></script></body></html>
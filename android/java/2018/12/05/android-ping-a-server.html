<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name=description content="In this post we will see that how to check whether a host reachable or not in Android by using ping command programatically."><meta name=keywords content="android, java, '"><meta name=author content="Ravindra Sisodia"><meta property=og:title content="Android How to Ping a Server Programatically: Ravindra's Blog"><meta property=og:url content=https://infosecravindra.github.io/android/java/2018/12/05/android-ping-a-server.html><meta property=og:site_name content="Ravindra's Blog"><meta property=og:type content=article><meta property=og:description content="In this post we will see that how to check whether a host reachable or not in Android by using ping command programatically."><meta property=article:author content="Ravindra Sisodia"><meta property=article:tag content=android><meta property=article:tag content=java><meta property=article:published_time content=2019-04-08T16:16:09Z><meta property=og:image content=https://infosecravindra.github.io/assets/images/posts/android/android-ping-a-server.jpg><meta property=fb:app_id content=222225015360700><title>Android How to Ping a Server Programatically | Ravindra's Blog</title><link rel=icon href=https://infosecravindra.github.io/assets/images/logo.png><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.3/css/all.css integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link href=/assets/css/screen.css rel=stylesheet><link href=/assets/css/main.css rel=stylesheet></head><body class=layout-post><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand><img src=/assets/images/logo.png alt="Ravindra's Blog" width=30 height=30 class="d-inline-block align-top">Ravindra's Blog</a> <button class="navbar-toggler btn-link" data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarMediumish aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/index.html><i class="fas fa-home"></i>&nbsp;&nbsp;Home</a></li><li class=nav-item><a class=nav-link href=/cheatsheets><i class="fas fa-book"></i>&nbsp;&nbsp;Cheatsheets</a></li><li class=nav-item><a class=nav-link href=/portfolio><i class="fas fa-user"></i>&nbsp;&nbsp;Projects</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><i class="far fa-address-card"></i>&nbsp;&nbsp;Contact</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a target=_blank class=nav-link href=mailto:rscipher001@gmail.com><i class="fas fa-envelope"></i>&nbsp;&nbsp;Mail</a><div class=dropdown-divider></div><a target=_blank class=nav-link href="https://www.github.com/InfoSecRavindra/"><i class="fab fa-github"></i>&nbsp;&nbsp;GitHub</a> <a target=_blank class=nav-link href="https://www.linkedin.com/in/InfoSecRavindra/"><i class="fab fa-linkedin"></i>&nbsp;&nbsp;LinkedIn</a> <a target=_blank class=nav-link href=https://www.youtube.com/c/EcoTechClubETC><i class="fab fa-youtube"></i>&nbsp;&nbsp;YouTube</a><div class=dropdown-divider></div><a target=_blank class=nav-link href=https://twitter.com/InfoSecRavindra><i class="fab fa-twitter"></i>&nbsp;&nbsp;Twitter</a></div></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading><h1 class=sitetitle>Ravindra's Blog</h1><p class=lead>Let's Secure Everything</p></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class=share><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https://infosecravindra.github.io/android/java/2018/12/05/android-ping-a-server.html" onclick="window.open(this.href, 'facebook-share');return false;"><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=Android+How+to+Ping+a+Server+Programatically&url=https://infosecravindra.github.io/android/java/2018/12/05/android-ping-a-server.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=https://infosecravindra.github.io/android/java/2018/12/05/android-ping-a-server.html" onclick="window.open(this.href, 'linkedin-share');return false;"><i class="fab fa-linkedin-in"></i></a></li></ul><div class=sep></div><ul><li><a class="small smoothscroll" href=#disqus_thread></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><h1 class=posttitle>Android How to Ping a Server Programatically</h1></div><img class="featured-image img-fluid" src=https://infosecravindra.github.io/assets/images/posts/android/android-ping-a-server.jpg alt="Android How to Ping a Server Programatically"><div class=article-post><p>Finding a solution in Android is never easy, sometimes you find a solution but it is using deprecated libraries or it won’t work on all Android versions, etc. That’s why I am relying on an external binary called <code class=highlighter-rouge>ping</code>. Ping is avaiable in all android phones and it is very mature.</p><h2 id=steps>Steps</h2><ul><li>Create Android Project</li><li>Add Internet Permission</li><li>Ping A Server</li><li>Check Result</li></ul><h2 id=code>Code</h2><div class="language-java highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kn>import</span> <span class=nn>android.content.Context</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>android.net.ConnectivityManager</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>android.net.NetworkInfo</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>android.support.v7.app.AppCompatActivity</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>android.os.Bundle</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>android.util.Log</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>android.widget.Toast</span><span class=o>;</span>

<span class=kn>import</span> <span class=nn>java.io.IOException</span><span class=o>;</span>
<span class=kn>import</span> <span class=nn>java.net.InetAddress</span><span class=o>;</span>

<span class=kd>public</span> <span class=kd>class</span> <span class=nc>MainActivity</span> <span class=kd>extends</span> <span class=n>AppCompatActivity</span> <span class=o>{</span>

    <span class=n>Boolean</span> <span class=n>isConnected</span> <span class=o>=</span> <span class=kc>false</span><span class=o>,</span>
            <span class=n>isWiFi</span> <span class=o>=</span> <span class=kc>false</span><span class=o>,</span>
            <span class=n>isMobile</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>

    <span class=nd>@Override</span>
    <span class=kd>protected</span> <span class=kt>void</span> <span class=nf>onCreate</span><span class=o>(</span><span class=n>Bundle</span> <span class=n>savedInstanceState</span><span class=o>)</span> <span class=o>{</span>
        <span class=kd>super</span><span class=o>.</span><span class=na>onCreate</span><span class=o>(</span><span class=n>savedInstanceState</span><span class=o>);</span>
        <span class=n>setContentView</span><span class=o>(</span><span class=n>R</span><span class=o>.</span><span class=na>layout</span><span class=o>.</span><span class=na>activity_main</span><span class=o>);</span>

        <span class=c1>// https://developer.android.com/training/monitoring-device-state/connectivity-monitoring</span>
        <span class=n>ConnectivityManager</span> <span class=n>cm</span> <span class=o>=</span>
                <span class=o>(</span><span class=n>ConnectivityManager</span><span class=o>)</span> <span class=k>this</span><span class=o>.</span><span class=na>getSystemService</span><span class=o>(</span><span class=n>Context</span><span class=o>.</span><span class=na>CONNECTIVITY_SERVICE</span><span class=o>);</span>

        <span class=n>NetworkInfo</span> <span class=n>activeNetwork</span> <span class=o>=</span> <span class=n>cm</span><span class=o>.</span><span class=na>getActiveNetworkInfo</span><span class=o>();</span>

        <span class=c1>// True if network is available.</span>
        <span class=k>if</span> <span class=o>(</span><span class=n>activeNetwork</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>

            <span class=c1>// True if using WiFI</span>
            <span class=n>isWiFi</span> <span class=o>=</span> <span class=n>activeNetwork</span><span class=o>.</span><span class=na>getType</span><span class=o>()</span> <span class=o>==</span> <span class=n>ConnectivityManager</span><span class=o>.</span><span class=na>TYPE_WIFI</span><span class=o>;</span>

            <span class=c1>// True if using Mobile Data</span>
            <span class=n>isMobile</span> <span class=o>=</span> <span class=n>activeNetwork</span><span class=o>.</span><span class=na>getType</span><span class=o>()</span> <span class=o>==</span> <span class=n>ConnectivityManager</span><span class=o>.</span><span class=na>TYPE_MOBILE</span><span class=o>;</span>

            <span class=n>isConnected</span> <span class=o>=</span> <span class=n>activeNetwork</span><span class=o>.</span><span class=na>isConnectedOrConnecting</span><span class=o>();</span>
        <span class=o>}</span>

        <span class=k>if</span> <span class=o>(</span><span class=n>isConnected</span><span class=o>)</span> <span class=o>{</span>
            <span class=k>if</span> <span class=o>(</span><span class=n>isWiFi</span><span class=o>)</span> <span class=o>{</span>
                <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"Yes, WiF"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>)</span>
                        <span class=o>.</span><span class=na>show</span><span class=o>();</span>

                <span class=c1>// ping google server for testing purpose</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>isConnectedToThisServer</span><span class=o>(</span><span class=s>"www.google.com"</span><span class=o>))</span> <span class=o>{</span>
                    <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"Yes, Connected to Google"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>)</span>
                            <span class=o>.</span><span class=na>show</span><span class=o>();</span>
                <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
                    <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"No Google Connection"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>)</span>
                            <span class=o>.</span><span class=na>show</span><span class=o>();</span>
                <span class=o>}</span>
            <span class=o>}</span>


            <span class=k>if</span> <span class=o>(</span><span class=n>isMobile</span><span class=o>)</span> <span class=o>{</span>

                <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"Yes, Mobile"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>)</span>
                        <span class=o>.</span><span class=na>show</span><span class=o>();</span>
                <span class=k>if</span> <span class=o>(</span><span class=n>isConnectedToThisServer</span><span class=o>(</span><span class=s>"www.google.com"</span><span class=o>))</span> <span class=o>{</span>
                    <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"Yes, Connected to Google"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>).</span><span class=na>show</span><span class=o>();</span>
                <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
                    <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"No Google Connection"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>).</span><span class=na>show</span><span class=o>();</span>
                <span class=o>}</span>
            <span class=o>}</span>
        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
            <span class=n>Toast</span><span class=o>.</span><span class=na>makeText</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=s>"No Network"</span><span class=o>,</span> <span class=n>Toast</span><span class=o>.</span><span class=na>LENGTH_SHORT</span><span class=o>).</span><span class=na>show</span><span class=o>();</span>
        <span class=o>}</span>
    <span class=o>}</span>


    <span class=c1>// Function that uses ping, takes server name or ip as argument.</span>
    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isConnectedToThisServer</span><span class=o>(</span><span class=n>String</span> <span class=n>host</span><span class=o>)</span> <span class=o>{</span>
        <span class=c1>// https://stackoverflow.com/questions/3905358/how-to-ping-external-ip-from-java-android</span>
        <span class=n>Runtime</span> <span class=n>runtime</span> <span class=o>=</span> <span class=n>Runtime</span><span class=o>.</span><span class=na>getRuntime</span><span class=o>();</span>
        <span class=k>try</span> <span class=o>{</span>
            <span class=n>Process</span> <span class=n>ipProcess</span> <span class=o>=</span> <span class=n>runtime</span><span class=o>.</span><span class=na>exec</span><span class=o>(</span><span class=s>"/system/bin/ping -c 1 "</span> <span class=o>+</span> <span class=n>host</span><span class=o>);</span>
            <span class=kt>int</span> <span class=n>exitValue</span> <span class=o>=</span> <span class=n>ipProcess</span><span class=o>.</span><span class=na>waitFor</span><span class=o>();</span>
            <span class=k>return</span> <span class=o>(</span><span class=n>exitValue</span> <span class=o>==</span> <span class=mi>0</span><span class=o>);</span>
        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>IOException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
        <span class=o>}</span> <span class=k>catch</span> <span class=o>(</span><span class=n>InterruptedException</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
            <span class=n>e</span><span class=o>.</span><span class=na>printStackTrace</span><span class=o>();</span>
        <span class=o>}</span>
        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></div></div></div><hr><p><span>Original:&nbsp;<time datetime=2018-12-05>05 Dec 2018</time></span> <span class="float-right clearfix">Updated:&nbsp;<time datetime=2019-04-08>Apr 8, 2019</time></span></p><hr><div class=after-post-tags><ul class=tags><li><a href=/archives/posts_archive.html#android class=post-tag>android</a></li><li><a href=/archives/posts_archive.html#java class=post-tag>java</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="prev d-block col-md-6" href=https://infosecravindra.github.io/termux/wfuzz/hacking/2018/12/04/install-wfuzz-in-termux.html>&laquo; Install WFuzz in Termux</a> <a class="next d-block col-md-6 text-lg-right" href=https://infosecravindra.github.io/vimeo/youtube_dl/2018/12/16/download-private-embedded-vimeo-videos.html>How To Download Private Embedded Vimeo Videos &raquo;</a><div class=clearfix></div></div></div></div></div><div class=container><div id=comments class="row justify-content-center mb-5"><div class="col-md-9 col-offset-1"><div id=disqus_thread></div><script src=/assets/js/disqus.js></script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2019 Ravindra Sisodia</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script defer src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script defer src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script defer src=/assets/js/ie10-viewport-bug-workaround.js></script><script defer src=/assets/js/mediumish.js></script><script defer id=dsq-count-scr src=//infosecravindra-github-io.disqus.com/count.js></script></body></html>
<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel=icon href=https://infosecravindra.github.io/assets/images/favicons/logo.png><link rel=manifest href=https://infosecravindra.github.io/assets/images/favicons/manifest.json><meta name=theme-color content=#ffffff><meta name=Description content="How to use resize images in Laravel"><meta name=keywords content="laravel, intervention, '"><meta property=og:title content="How to Resize Images in Laravel: Ravindra's Blog - Let's Secure Everything"><meta property=og:url content=https://infosecravindra.github.io/laravel/intervention/2019/04/08/how-to-resize-user-uploaded-images-in-laravel.html><meta property=og:site_name content="Ravindra's Blog - Let's Secure Everything"><meta property=og:type content=article><meta property=og:description content="How to use resize images in Laravel"><meta property=article:author content="Ravindra Sisodia"><meta property=article:tag content=laravel><meta property=article:tag content=intervention><meta property=article:published_time content=2019-04-22T23:33:28Z><meta property=og:image content=https://infosecravindra.github.io/assets/images/posts/laravel/how-to-resize-user-uploaded-images-in-laravel.jpg><meta property=fb:app_id content=222225015360700><meta name=author content="Ravindra Sisodia"><title>How to Resize Images in Laravel | Ravindra's Blog</title><meta name=description content="How to use resize images in Laravel"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.6.3/css/all.css integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel=stylesheet><link href=/assets/css/main.css rel=stylesheet></head><body class=layout-post><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down"><div class="container pr-0"><a class=navbar-brand href="/"><img src=/assets/images/logo.png alt="Ravindra's Blog"></a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarMediumish aria-controls=navbarMediumish aria-expanded=false aria-label="Toggle navigation"><span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarMediumish><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/index.html><i class="fas fa-home"></i>&nbsp;&nbsp;Home</a></li><li class=nav-item><a class=nav-link href=/cheatsheets><i class="fas fa-book"></i>&nbsp;&nbsp;Cheatsheets</a></li><li class=nav-item><a class=nav-link href=/portfolio><i class="fas fa-user"></i>&nbsp;&nbsp;Projects</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><i class="far fa-address-card"></i>&nbsp;&nbsp;Contact</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a target=_blank class=nav-link href=mailto:rscipher001@gmail.com><i class="fas fa-envelope"></i>&nbsp;&nbsp;Mail</a><div class=dropdown-divider></div><a target=_blank class=nav-link href="https://www.github.com/InfoSecRavindra/"><i class="fab fa-github"></i>&nbsp;&nbsp;GitHub</a> <a target=_blank class=nav-link href="https://www.linkedin.com/in/InfoSecRavindra/"><i class="fab fa-linkedin"></i>&nbsp;&nbsp;LinkedIn</a> <a target=_blank class=nav-link href=https://www.youtube.com/c/EcoTechClubETC><i class="fab fa-youtube"></i>&nbsp;&nbsp;YouTube</a><div class=dropdown-divider></div><a target=_blank class=nav-link href=https://twitter.com/InfoSecRavindra><i class="fab fa-twitter"></i>&nbsp;&nbsp;Twitter</a></div></li></ul></div></div></nav><div class=site-content><div class=container><div class=mainheading><h1 class=sitetitle>Ravindra's Blog</h1><p class=lead>Let's Secure Everything</p></div><div class=main-content><div class=container><div class=row><div class="col-md-2 pl-0"><div class=share><p>Share</p><ul><li class="ml-1 mr-1"><a target=_blank href="https://facebook.com/sharer.php?u=https://infosecravindra.github.io/laravel/intervention/2019/04/08/how-to-resize-user-uploaded-images-in-laravel.html" onclick="window.open(this.href, 'facebook-share');return false;"><i class="fab fa-facebook-f"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://twitter.com/intent/tweet?text=How+to+Resize+Images+in+Laravel&url=https://infosecravindra.github.io/laravel/intervention/2019/04/08/how-to-resize-user-uploaded-images-in-laravel.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target=_blank href="https://www.linkedin.com/shareArticle?mini=true&url=https://infosecravindra.github.io/laravel/intervention/2019/04/08/how-to-resize-user-uploaded-images-in-laravel.html" onclick="window.open(this.href, 'linkedin-share');return false;"><i class="fab fa-linkedin-in"></i></a></li></ul><div class=sep></div><ul><li><a class="small smoothscroll" href=#disqus_thread></a></li></ul></div></div><div class="col-md-9 flex-first flex-md-unordered"><div class=mainheading><h1 class=posttitle>How to Resize Images in Laravel</h1></div><img class="featured-image img-fluid" src=https://infosecravindra.github.io/assets/images/posts/laravel/how-to-resize-user-uploaded-images-in-laravel.jpg alt="How to Resize Images in Laravel"><div class=article-post><h1 id=introduction>Introduction</h1><p>Image uploading is a common thing among web applications and in many situations we have to process those images before showing them back to users, we may have to resize images, generate thumbnails, etc. We are going to use Intervention package for that in Laravel, it can work with both <code class=highlighter-rouge>gd</code> and <code class=highlighter-rouge>imagick</code> library, I’d suggest you to use imagick. Let’s get started</p><h1 id=steps>Steps</h1><ul><li>Install Intervention</li><li>Update Configuration</li><li>Save And Resize Image in Controller</li></ul><h1 id=install-intervention>Install Intervention</h1><p>Go to http://image.intervention.io/ and follow installation instructions, I am also going to put those instruction here but remember following official guides are better anyways open terminal and type</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>composer require intervention/image
</code></pre></div></div><p>Open <code class=highlighter-rouge>config/app.php</code> and add the following lines</p><p>in the <code class=highlighter-rouge>$providers</code> array</p><div class="language-php highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nx>Intervention\Image\ImageServiceProvider</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
</code></pre></div></div><p>in the <code class=highlighter-rouge>$aliases</code> array</p><div class="language-php highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=s1>'Image'</span> <span class=o>=&gt;</span> <span class=nx>Intervention\Image\Facades\Image</span><span class=o>::</span><span class=na>class</span>
</code></pre></div></div><h1 id=update-configuration>Update Configuration</h1><p><em>NOTE 1:</em> Tools like XAMPP doesn’t come with imagick support so if you’re a XAMPP user then skip this step. <em>NOTE 2:</em> In most linux systems you’ve to manually install imagick, in Ubuntu you can type <code class=highlighter-rouge>sudo apt install php-imagick</code> to install it.</p><p>By default Intervention uses GD library and we want to use <code class=highlighter-rouge>imagick</code> so we will pull configuration files and change our driver from <code class=highlighter-rouge>gd</code> to <code class=highlighter-rouge>imagick</code>, open terminal and type</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>php artisan vendor:publish <span class=nt>--provider</span><span class=o>=</span><span class=s2>"Intervention</span><span class=se>\I</span><span class=s2>mage</span><span class=se>\I</span><span class=s2>mageServiceProviderLaravel5"</span>
</code></pre></div></div><p>Now you can access intervention config in <code class=highlighter-rouge>config/image.php</code>, just change your driver from <code class=highlighter-rouge>gd</code> to <code class=highlighter-rouge>imagick</code> and you’re good to go.</p><h1 id=save-and-resize-image-in-controller>Save And Resize Image in Controller</h1><p>I assume you’ve completed first step, we will take a look at file upload example, here is HTML code</p><div class="language-html highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nt>&lt;input</span> <span class=na>name=</span><span class=s>"image"</span> <span class=na>type=</span><span class=s>"file"</span> <span class=na>accept=</span><span class=s>"image/jpeg"</span> <span class=na>required</span><span class=nt>&gt;</span>
</code></pre></div></div><p>We will have validation in Controller or Form Request like this</p><div class="language-php highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=c1>// This is a form request code snippet but validation rules are same everywhere</span>
<span class=c1>// Laravel also allows us to set dimensions option for images</span>
<span class=k>public</span> <span class=k>function</span> <span class=nf>rules</span><span class=p>()</span>
    <span class=p>{</span>
        <span class=k>return</span> <span class=p>[</span>
            <span class=s1>'image'</span> <span class=o>=&gt;</span> <span class=s1>'required|image|mimes:jpeg,jpg|dimensions:min_width=1000,ratio=1/1'</span><span class=p>,</span>
        <span class=p>];</span>
    <span class=p>}</span>
</code></pre></div></div><p>Our Controller will look like this.</p><div class="language-php highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=c1>// This example uses a form request class but you're free to implement controller level validation</span>
<span class=k>public</span> <span class=k>function</span> <span class=nf>store</span><span class=p>(</span><span class=nx>ImageRequest</span> <span class=nv>$request</span><span class=p>)</span>
<span class=p>{</span>
    <span class=c1>// Save image and get path</span>
    <span class=nv>$path</span> <span class=o>=</span> <span class=nv>$request</span><span class=o>-&gt;</span><span class=na>image</span><span class=o>-&gt;</span><span class=na>storeAs</span><span class=p>(</span><span class=s1>'images'</span><span class=p>,</span> <span class=nb>md5_file</span><span class=p>(</span><span class=nv>$request</span><span class=o>-&gt;</span><span class=na>image</span><span class=p>)</span> <span class=o>.</span> <span class=s1>'.jpg'</span><span class=p>,</span> <span class=s1>'public'</span><span class=p>);</span>
    <span class=c1>// In storeAs method first argument 'images' is folder name, second argument is md5sum for file to avoid redundancy when same file uploaded twice, and this argument public is used when we want to store image in public directory.</span>

    <span class=c1>// Generate a thumbnail</span>
    <span class=c1>// use Intervention\Image\Facades\Image;</span>
    <span class=nv>$realPath</span> <span class=o>=</span> <span class=s1>'storage/'</span> <span class=o>.</span> <span class=nv>$path</span><span class=p>;</span>
    <span class=nx>Image</span><span class=o>::</span><span class=na>make</span><span class=p>(</span><span class=nv>$realPath</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>resize</span><span class=p>(</span><span class=mi>400</span><span class=p>,</span> <span class=mi>400</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>save</span><span class=p>(</span><span class=nv>$realPath</span><span class=p>);</span>

    <span class=c1>// Make functions take file path as argument, save function stores files to given location, in this case we are updating original file.</span>
<span class=p>}</span>
</code></pre></div></div></div><hr><p><span>Original:&nbsp;<time datetime=2019-04-08>08 Apr 2019</time></span> <span class="float-right clearfix">Updated:&nbsp;<time datetime=2019-04-22 itemprop=dateModified>Apr 22, 2019</time></span></p><hr><div class=after-post-tags><ul class=tags><li><a href=/archives/posts_archive.html#intervention class=post-tag>intervention</a></li><li><a href=/archives/posts_archive.html#laravel class=post-tag>laravel</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="prev d-block col-md-6" href=https://infosecravindra.github.io/laravel/queues/2019/04/07/how-to-use-queues-in-laravel.html>&laquo; How to Use Queues in Laravel</a> <a class="next d-block col-md-6 text-lg-right" href=https://infosecravindra.github.io/keyboard/shortcuts/2019/04/23/my-favorite-editor-shortcuts-for-faster-development.html>My Favorite Editor Shortcuts For Faster Development &raquo;</a><div class=clearfix></div></div></div></div></div><div class=container><div id=comments class="row justify-content-center mb-5"><div class=col-md-8><div id=disqus_thread></div><script src=/assets/js/disqus.js></script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer class=footer><div class=container><div class=row><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2019 Ravindra Sisodia</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target=_blank href=https://www.wowthemes.net>Mediumish Theme</a> by WowThemes.net</div></div></div></footer></div><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script><script src=/assets/js/ie10-viewport-bug-workaround.js></script><script src=/assets/js/mediumish.js></script><script id=dsq-count-scr src=//infosecravindra-github-io.disqus.com/count.js></script></body></html>